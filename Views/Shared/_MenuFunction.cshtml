@using QOS.Helpers
@inject Microsoft.Extensions.Localization.IStringLocalizer<QOS.SharedResource> Localizer
@{
    Layout = "_Layout";
}
<link rel="stylesheet" href="~/css/menu_left.css" />
<div class="container-fluid p-0">
    <div class="row ">
        <!-- Mobile Menu Button -->
        <div class="col-12 d-lg-none p-3">
            <button class="btn mobile-menu-btn w-100" type="button" data-bs-toggle="offcanvas" data-bs-target="#menuSidebar">
                ☰ Menu 
            </button>
        </div>

        <!-- Desktop Sidebar -->
        <div class="col-lg-2 d-none d-lg-block modern-sidebar" id="desktopSidebar">
        <!-- Toggle Button -->
            <button class="toggle-sidebar-btn" id="toggleBtn" title="Thu nhỏ/Mở rộng menu">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="sidebar-header">
                <h3><span class="feature-icon">⚙️</span>@Localizer["Function"]</h3>
            </div>
            <div class="sidebar-content">
                <ul class=" list-unstyled list-group list-group-flush">
                    <li class=" menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ManageOperation" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ManageOperation" ><span class="menu-number">1</span>@Localizer["ManageOperation"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ManageFault" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ManageFault"><span class="menu-number">2</span>@Localizer["ManageFault"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoBTP" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoBTP"><span class="menu-number">3</span>@Localizer["ThongSoBTP"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoTP" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoTP"><span class="menu-number">4</span>@Localizer["ThongSoTP"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoDo" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoDo"><span class="menu-number">5</span>@Localizer["ThongSoDo"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ETSMoStyle" }, new[] { "Index" })" asp-controller="Function" asp-action="F_MOStyleSize"><span class="menu-number">6</span>@Localizer["ETSMoStyle"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingContact" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingContact"><span class="menu-number">7</span>@Localizer["TrackingContact"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingSetup" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingSetup"><span class="menu-number">8</span>@Localizer["TrackingSetup"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingUpload" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingUpload"><span class="menu-number">9</span>@Localizer["TrackingUpload"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "OnlineFile" }, new[] { "Index" })" asp-controller="Function" asp-action="F_OnlineFiles"><span class="menu-number">10</span>@Localizer["OnlineFile"]</a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Nội dung chính -->
        <div class="col-lg-10 main-content content-area pb-5" id="contentArea">
            @RenderBody()
        </div>
    </div>
</div>

<!-- Offcanvas cho mobile -->
<div class="offcanvas offcanvas-start offcanvas-modern" tabindex="-1" id="menuSidebar">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">TÍNH NĂNG</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="list-unstyled sidebar-menu">
            <li class=" menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ManageOperation" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ManageOperation" ><span class="menu-number">1</span>@Localizer["ManageOperation"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ManageFault" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ManageFault"><span class="menu-number">2</span>@Localizer["ManageFault"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoBTP" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoBTP"><span class="menu-number">3</span>@Localizer["ThongSoBTP"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoTP" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoTP"><span class="menu-number">4</span>@Localizer["ThongSoTP"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ThongSoDo" }, new[] { "Index" })" asp-controller="Function" asp-action="F_ThongSoDo"><span class="menu-number">5</span>@Localizer["ThongSoDo"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "ETSMoStyle" }, new[] { "Index" })" asp-controller="Function" asp-action="F_MOStyleSize"><span class="menu-number">6</span>@Localizer["ETSMoStyle"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingContact" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingContact"><span class="menu-number">7</span>@Localizer["TrackingContact"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingSetup" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingSetup"><span class="menu-number">8</span>@Localizer["TrackingSetup"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "TrackingUpload" }, new[] { "Index" })" asp-controller="Function" asp-action="F_TrackingUpload"><span class="menu-number">9</span>@Localizer["TrackingUpload"]</a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link @Html.IsActive(new[] { "OnlineFile" }, new[] { "Index" })" asp-controller="Function" asp-action="F_OnlineFiles"><span class="menu-number">10</span>@Localizer["OnlineFile"]</a>
                    </li>
        </ul>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggleBtn = document.getElementById('toggleBtn');
        const sidebar = document.getElementById('desktopSidebar');
        const contentArea = document.getElementById('contentArea');
        
        // Lấy trạng thái từ localStorage
        const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
        
        // Áp dụng trạng thái ban đầu
        if (isCollapsed) {
            sidebar.classList.add('collapsed');
            contentArea.classList.add('expanded');
            toggleBtn.innerHTML = '▶';
        }
        
        // Xử lý sự kiện click
        toggleBtn.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            contentArea.classList.toggle('expanded');
            
            // Thay đổi icon
            if (sidebar.classList.contains('collapsed')) {
                toggleBtn.innerHTML = '▶';
                localStorage.setItem('sidebarCollapsed', 'true');
            } else {
                toggleBtn.innerHTML = '◀';
                localStorage.setItem('sidebarCollapsed', 'false');
            }
        });
    });
</script>