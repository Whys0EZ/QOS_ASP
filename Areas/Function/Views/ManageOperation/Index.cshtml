
@inject Microsoft.Extensions.Localization.IStringLocalizer<QOS.SharedResource> Localizer
@inject Microsoft.Extensions.Localization.IStringLocalizer<QOS.Areas.Function.SharedResource> FuncLocalizer
@model QOS.Areas.Function.Models.SearchOperationViewModel

@{
    ViewData["Title"] = @FuncLocalizer["F_Operaton"];
    Layout = "_MenuFunction";
}

<partial name="_AlertMessage" />
<h2>@FuncLocalizer["F_Operaton_Title"]</h2>
<div class="d-flex align-items-center gap-2">
    <form asp-area="Function" asp-action="Search" asp-controller="ManageOperation" method="post" class="d-flex align-items-center gap-2 mb-0">
        <label>MO</label>
        <input type="text" id="mo" name="mo" value="@Model.MO"  class="form-control" />
        <button type="submit" class="btn btn-primary" style="width: 200px;">@Localizer["Search"]</button>
    </form>
    <form asp-area="Function" asp-action="Upload" asp-controller="ManageOperation" enctype="multipart/form-data"
        method="post" class="d-flex align-items-center gap-2 mb-0">
        <input type="file" name="file" class="form-control" />
        <button type="submit" class="btn btn-success text-nowrap">@Localizer["Upload"]</button>
    </form>
    <form asp-area="Function" asp-controller="ManageOperation" asp-action="Download" method="post" class="mb-0">
        <button type="submit" class="btn btn-primary">@Localizer["ExportExcel"]</button>
    </form>
</div>

<div class="mt-4">
    @if (Model != null && Model.Results.Any())
        {
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>MO</th>
                        <th>@FuncLocalizer["Operation_Code"]</th>
                        <th>@FuncLocalizer["Operation_VN"]</th>
                        <th>@FuncLocalizer["Operation_EN"]</th>
                        <th>@Localizer["UserUpdate"]</th>
                        <th>@Localizer["Factory"]</th>
                        <th>@Localizer["LastUpdate"]</th>
                        
                    </tr>
                </thead>
                <tbody>
                @foreach (var item in Model.Results)
                {
                    <tr>
                        <td>@item.MO</td>
                        <td>@item.Operation_Code</td>
                        <td>@item.Operation_Name_VN</td>
                        <td>@item.Operation_Name_EN</td>
                        <td>@item.UserUpdate</td>
                        <td>@item.CMD</td>
                        <td>@item.LastUpdate?.ToString("yyyy-MM-dd")</td>
                    </tr>
                }
                </tbody>
            </table>
        }
    else
    {
        <div class="mt-3 text-muted">@FuncLocalizer["Nodata"]</div>
    }
</div>