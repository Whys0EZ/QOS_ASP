@model QOS.Models.UserEditViewModel

@{
    ViewData["Title"] = "Management User";
    Layout = "_MenuSystem";
}

<div class="d-flex flex-row justify-content-between align-items-center">
    <h2>Thay đổi thông tin người dùng</h2>
    <a asp-action="Index" class="btn btn-secondary me-3">Quay lại</a>
</div>


@{
   

    // Mapping property → mô tả
    var permissions = new Dictionary<string, string>
    {
        { "SYS_Admin", "Quản trị hệ thống" },
        { "A_F1", "A1 - Cập nhật công đoạn đơn hàng" },
        { "A_F2", "A2 - Cập nhật thông tin lỗi" },
        { "A_F3", "A3 - Điểm đo thống số BTP" },
        { "A_F4", "A4 - Điểm đo thống số TP" },
        { "A_F5", "A5 - Thông tin MO trên ETS" },
        { "A_F6", "A6 - Group Contact List" },
        { "A_F7", "A7 - Group Contact List" },
        { "A_F8", "A8 - Group Contact List" },
        { "A_F9", "A9 - Group Contact List" },
        { "A_F10", "A10 - Group Contact List" },

        { "B_F0", "B0 - Sửa Báo Cáo" },
        { "B_F01", "B01 - Xóa Báo Cáo" },
        { "B_F1", "B1 - Xem báo cáo chất lượng cắt" },
        { "B_F2", "B2 - Xem báo cáo CPI" },
        { "B_F3", "B3 - Xem báo cáo bàn cắt đầu tiên" },
        { "B_F4", "B4 - Xem báo cáo EndLine" },
        { "B_F5", "B5 - Xem báo cáo tổng hợp báo cáo đi chuyền" },
        { "B_F6", "B6 - Xem báo cáo tổng hợp báo cáo cuối chuyền" },
        { "B_F7", "B7 - Xem báo cáo tổng hợp" },
        { "B_F8", "B8 - Xem báo cáo tổng hợp" },
        { "B_F9", "B9 - Xem báo cáo tổng hợp" },

        { "C_F1", "C1 - Quản lý nhà máy" },
        { "C_F2", "C2 - Quản lý phòng ban" },
        { "C_F3", "C3 - Quản lý xưởng" },

        { "S_F1", "S1 - Quản lý User" },
        { "S_F2", "S2 - Đổi mật khẩu" },

        { "Q_F0", "Q0 - QA sử dụng Tablet" },
        { "Q_F1", "Q1 - QA Form báo cáo chất lượng cắt" },
        { "Q_F2", "Q2 - QA Form báo cáo CPI" },
        { "Q_F3", "Q3 - QA Form báo cáo bàn cắt đầu tiên" },
        { "Q_F4", "Q4 - QA Form báo cáo đi chuyền" },
        { "Q_F5", "Q5 - QA Form nhận xét bó hàng đầu chuyền" },
        { "Q_F6", "Q6 - QA Form báo cáo cuối chuyền" },
        { "Q_F7", "Q7 - QA Form báo cáo thông số BTP" },
        { "Q_F8", "Q8 - QA Form báo cáo thông số TP" },
        { "Q_F9", "Q9 - Online File in Ipad" },

        { "SYS_LED", "Quản trị hệ thống LED" }
    };
}

<form asp-action="EditUser" method="post" class="mt-4 mb-4">

    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="Username" />
    <div class="row" style="padding:30px;">
        <div class="col-md-6 ">
            <h4>Thông tin người dùng</h4>
            <div class="mb-3">
                <label class="form-label">Factory</label>
                <input asp-for="FactoryID" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Team</label>
                <input asp-for="TeamID" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Full Name</label>
                <input asp-for="FullName" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Email</label>
                <input asp-for="Email" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Unit Check</label>
                <input asp-for="Unit_Check" class="form-control" />
            </div>

            <div class="mb-3">
                <label class="form-label">Line Check</label>
                <input asp-for="Line_Check" class="form-control" />
            </div>
        </div>
        <div class="col-md-6">
            <h4>Phân quyền</h4>
            <table class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Chức Năng</th>
                        <th>Mô Tả</th>
                        <th>Cấp Quyền</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in permissions)
                    {
                        var prop = Model.GetType().GetProperty(item.Key);
                        bool granted = false;
                        if (prop != null)
                        {
                            granted = (bool)(prop.GetValue(Model) ?? false);
                        }

                        <tr>
                            <td>@item.Key</td>
                            <td>@item.Value</td>
                            <td>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input"
                                        type="radio"
                                        name="@item.Key"
                                        value="true"
                                        @(granted ? "checked" : "") />
                                    <label class="form-check-label">Yes</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input"
                                        type="radio"
                                        name="@item.Key"
                                        value="false"
                                        @(!granted ? "checked" : "") />
                                    <label class="form-check-label">No</label>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <div class="p-5">
        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
        <a asp-action="Index" class="btn btn-secondary">Quay lại</a>
    </div>
</form>
